{{#if model.hasTitle}}
    {{#if titleInEditMode}}
        <h3>
            {{#if layoutEditMode}}
                <form {{action "saveComponentChanges" on="submit"}}>
                    <div class="input-group">
                        {{input type="text" value=model.title class="form-control input recordLayoutDefinitionTitle" placeholder="Area Title" action="saveComponentChanges" on="submit"}}
                        <span class="input-group-btn">
                            <button class="btn btn-default" type="submit" {{action "saveComponentChanges"}}>Save</button>
                        </span>
                    </div>
                </form>
            {{/if}}
        </h3>
    {{else}}
        <h3>
            {{model.title}}
            {{#if layoutEditMode}}
                <button class="btn btn-default btn-xs editButton inlineEditButton" {{action "editComponentTitle"}}>Edit Title</button>
            {{/if}}
        </h3>
    {{/if}}
{{/if}}

{{#if layoutEditMode}}
    <div class="editPalette">
        <div class="btn-group layoutCreation rowButtons">
            <button class="btn btn-default btn-xs disabled" type="button">
                {{#if model.isRow}}
                    Row
                {{else}}
                    Column
                {{/if}} ID: {{model.id}}
            </button>
            {{#unless model.isRow}}
                {{#if model.hasTitle}}
                    <button class="btn btn-default btn-xs" {{action "removeComponentTitle"}}><i class="glyphicon glyphicon-minus"></i> Title</button>
                {{else}}
                    <button class="btn btn-default btn-xs" {{action "addComponentTitle"}}><i class="glyphicon glyphicon-plus"></i> Title</button>
                {{/if}}
                <button class="btn btn-default btn-xs" {{action "addRow" model}} type="button"><i class="glyphicon glyphicon-plus"></i> Row</button>
            {{/unless}}
            {{#unless model.isColumn}}
                <button class="btn btn-default btn-xs" {{action "addColumn" model}} type="button"><i class="glyphicon glyphicon-plus"></i> Column</button>
            {{/unless}}
            {{#unless model.isRow}}
                <button class="btn btn-default btn-xs" {{action "addField" model}} type="button"><i class="glyphicon glyphicon-plus"></i> Field</button>
            {{/unless}}

            <button class="btn btn-danger btn-xs" {{action "deleteItem" model}} type="button"><i class="glyphicon glyphicon-remove"></i></button>
        </div>

        {{#if model.verticalOrdering}}
            <div class="btn-group layoutCreation rowButtons">
                {{#if model.orderCanMoveUp}}
                    <button class="btn btn-default btn-xs" {{action "changeOrderUp" model}}><i class="glyphicon glyphicon-chevron-up"></i></button>
                {{/if}}
                {{#if model.orderCanMoveDown}}
                    <button class="btn btn-default btn-xs" {{action "changeOrderDown" model}}><i class="glyphicon glyphicon-chevron-down"></i></button>
                {{/if}}
            </div>
        {{/if}}

        {{#if model.horizontalOrdering}}
            <div class="btn-group layoutCreation rowButtons">
                {{#if model.orderCanMoveUp}}
                    <button class="btn btn-default btn-xs" {{action "changeOrderUp" model}}><i class="glyphicon glyphicon-chevron-left"></i></button>
                {{/if}}
                {{#if model.orderCanMoveDown}}
                    <button class="btn btn-default btn-xs" {{action "changeOrderDown" model}}><i class="glyphicon glyphicon-chevron-right"></i></button>
                {{/if}}
            </div>
        {{/if}}

    </div>
{{/if}}

{{#each field in model.fields}}
    {{record-field-display-type model=field displayStyle=field.displayType layoutEditMode=layoutEditMode removeFieldAction=removeFieldAction}}
{{/each}}

{{#each child in model.child_definitions_list}}
    {{record-layout-definition
        model=child
        parentModel=model
        layoutEditMode=layoutEditMode
        addRowAction=addRowAction
        addColumnAction=addColumnAction
        addFieldAction=addFieldAction
        deleteAction=deleteAction
        removeFieldAction=removeFieldAction
        changeOrderUpAction=changeOrderUpAction
        changeOrderDownAction=changeOrderDownAction
    }}
{{/each}}